#@(#) Makefile started by makeout(1) 2020-07-05 22:13:24
# generated by:   ... John S. Urban

PROGFILES = ../test/main.f90

CPROGFILES = 

PROG = ${PROGFILES:.f90=}

CPROG = ${CPROGFILES:.c=}

SRCS =  M_msg.f90 M_journal.f90 M_debug.f90

OBJS =  M_msg.o M_journal.o M_debug.o

LIBRARY = libM_msg.a
# # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # 
# platform-specific values you will probably change
# 
LIBS := -lM_msg
CC := cc
CFLAGS := -O
FC := gfortran
FFLAGS := -O -fPIC \
  -Wall -Wextra -Wimplicit-interface -fmax-errors=1 -fbounds-check -fcheck-array-temporaries\
  -march=native -ffast-math -funroll-loops\
  -fbacktrace
LDFLAGS := 


# # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # 
all: $(OBJS) $(LIBRARY) $(PROGFILES) $(PROG)
	: That is all Folks!

$(PROG): $(OBJS)
	-$(FC) $(LDFLAGS) $@.f90 -o $@ $(OBJS) $(LIBS)||echo "ouch: $@.f90 "

$(PROGFILES): $(LIBRARY)
	-$(FC) $(LDFLAGS) $@ -L. -o $* $(LIBS)
	env MANPATH=../man man str
	$*

$(LIBRARY): $(OBJS)
	$(AR) $(ARFLAGS) $@ $^

clean:
	rm -f $(PROG) $(CPROG) $(OBJS) *.mod $(LIBRARY)

.SUFFIXES: $(SUFFIXES) .f90 .F90 

.f90.o:
	$(FC) $(FFLAGS) -c $<

.F90.o:
	$(FC) $(FFLAGS) -c $<
#=================================================================================

M_debug.o: M_msg.o 
M_journal.o: M_debug.o M_msg.o 
